<!DOCTYPE html>
<html lang="ms" class="h-full bg-gray-100">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Transactions - Sistem ePTW UPNM</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    /* Simple transition for list items */
    .list-item {
      transition: all 0.5s cubic-bezier(0.55, 0, 0.1, 1);
    }
  </style>
</head>
<body class="bg-gray-100 py-12 px-4">

<div x-data="transactions()">
  <div class="max-w-2xl mx-auto">
    <div class="flex justify-between items-center mb-6">
       <h1 class="text-3xl font-bold text-gray-800">Transaksi Terkini</h1>
       <button @click="addNewTransaction" type="button" class="inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
         Simulate New Transaction
       </button>
    </div>

    <!-- Live Transaction List -->
    <div class="space-y-4">
      <template x-for="(transaction, index) in transactions" :key="transaction.id">
        <div class="list-item" :class="{
          'bg-white p-6 rounded-xl shadow-lg ring-2 ring-blue-500 transform scale-100': index === 0,
          'bg-white p-4 rounded-lg shadow-sm opacity-80 scale-100': index > 0
        }">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="flex-shrink-0" :class="index === 0 ? 'h-16 w-16' : 'h-12 w-12'">
                <img class="h-full w-full rounded-full object-cover" :src="transaction.avatar" alt="Student avatar">
              </div>
              <div class="ml-4">
                <div class="font-bold text-gray-900" :class="index === 0 ? 'text-lg' : 'text-base'" x-text="transaction.name"></div>
                <div class="text-sm text-gray-500" x-text="`ID: ${transaction.studentId}`"></div>
                <div x-show="index === 0" class="mt-1 text-xs inline-flex items-center rounded-full bg-blue-100 px-2 py-1 font-medium text-blue-700">
                  Transaksi Terbaharu
                </div>
              </div>
            </div>
            <div class="text-right">
              <div class="font-extrabold text-green-500" :class="index === 0 ? 'text-3xl' : 'text-xl'" x-text="`+RM${transaction.amount.toFixed(2)}`"></div>
              <div class="text-sm text-gray-500" x-text="transaction.time"></div>
            </div>
          </div>
        </div>
      </template>
    </div>
  </div>
</div>

<script>
  function transactions() {
    return {
      nextId: 4,
      transactions: [
        { id: 3, name: 'Siti Nurhaliza', studentId: 'S34567', amount: 75.50, time: '2 min ago', avatar: 'https://i.pravatar.cc/150?img=3' },
        { id: 2, name: 'Ahmad Albab', studentId: 'S23456', amount: 30.00, time: '5 min ago', avatar: 'https://i.pravatar.cc/150?img=12' },
        { id: 1, name: 'Mei Ling', studentId: 'S12345', amount: 50.25, time: '10 min ago', avatar: 'https://i.pravatar.cc/150?img=5' }
      ],
      addNewTransaction() {
        const names = ['Fatimah', 'David', 'Muthu', 'Boon Keat', 'Sarah'];
        const randomName = names[Math.floor(Math.random() * names.length)];
        const newTransaction = {
          id: this.nextId++,
          name: randomName,
          studentId: `S${Math.floor(Math.random() * 90000) + 10000}`,
          amount: parseFloat((Math.random() * 100 + 10).toFixed(2)),
          time: 'just now',
          avatar: `https://i.pravatar.cc/150?img=${this.nextId}`
        };
        
        // Add new transaction to the top of the list
        this.transactions.unshift(newTransaction);
      }
    }
  }
</script>

</body>
</html>